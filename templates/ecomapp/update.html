<!DOCTYPE html>
<html>
<head>
    <title>{% block head_title %}{% endblock %}</title>
    <!-- CSS only -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    {% block extra_head %}
    {% endblock %}
</head>
<body>

<script>
     function myFunction(id)   {
        console.log(id)
<!--        var data = {-->
<!--            email: $('#inputEmail4').val(),-->
<!--            firstname: $('#inputFirstname').val(),-->
<!--            username: $('#inputusername').val(),-->
<!--            gender: $('#inputgender').val(),-->
<!--            id: $('#update_id').val(),-->
<!--        }-->
            let myform = document.getElementById("update_form");

        var data = new FormData(myform)
        console.log(data);
<!--        data.append("email",$('#inputEmail4').val())-->
<!--        data.append("first",$('#inputFirstname').val())-->
<!--        data.append("user",$('#inputusername').val())-->
<!--        data.append("gender",$('#inputgender').val())-->
<!--        data.append("id",$('#update_id').val())-->

        for (var key of data.entries()) {
        console.log(key[0] + ', ' + key[1]);
    }
    var id= $('#update_id').val()
    console.log(id)
     var token = '{{csrf_token}}';
   $.ajax(
    {
        type:"POST",
        processData: false,
        headers: { "X-CSRFToken": token },
        url: `/ecom/update_order/${id}/`,
        data: $(myform).serialize(),
<!--        success: function( data )-->
<!--        {-->
<!--           console.log(data)-->
<!--           console.log(success)-->
<!--        }-->
     }
     )
    }
</script>
{% block body %}

{% if messages %}
<div>
    <strong>Messages:</strong>
    <ul>
        {% for message in messages %}
        <li>{{message}}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<div class="container text-center">
    <div class="row">
        <div class="col">
        </div>
        <div class="alert alert-primary col-6">
            <form method="post" action="" id="update_form">
                     {% csrf_token %}
                <div class="form-row">
                    <div class="form-group col-md">
                        <label>Email</label>
                        {{ form.email}}
                    </div>
                    <div class="form-group col-md">
                        <label>First Name</label>
                        {{ form.first_name}}
                    </div>
                    <div class="form-group col-md">
                        <label>ShopUser Name</label>
                        {{ form.username}}
                    </div>
                    <div class="form-group col-md">
                        <label>Gender</label>
                        {{ form.gender}}
                    </div>
                    <input  type="hidden" id="update_id" value={{form.id}}>
                </div>
                <h1></h1>
                <a type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong"
                       href="#" class="likebutton" id="like{{post.id}}" href="#" data-catid="{{ post.id }}" onclick="myFunction('{{i.id}}')">
                        update
                    </a>
            </form>
        </div>
        <div class="col">
        </div>
    </div>
</div>


{% block content %}
{% endblock %}
{% endblock %}
{% block extra_body %}
{% endblock %}
</body>
</html>


<!--<form action = "" method = "post">-->
<!--    {% csrf_token %}-->
<!--    {{form.as_p }}-->
<!--    <input type="submit" value=Submit">-->
<!--</form>-->